# Tails of execution.
iofox dev.

## Abstract.
Текущая модель реализации асинхронных операций Boost.Asio представляет из себя композиционный подход. При таком подходе для реализации более сложных асинхронных операций мы используем подмножество менее сложных, тем самым образуя композицию. Таким образом собирая новые асинхронные операции из подмножества других, пользователи создают все более сложные асинхронные операции. Проблема такого подхода заключается в том, что сложность этих асинхронных операций постоянно возрастает. А так как асинхронные операции в Boost.Asio условно можно считать за обычные функции. То, соответственно, и количество аргументов, передаваемых этим асинхронным операциям, увеличивается пропорционально их сложности. В данном документе описываются последствия и подходы для решения возникшей проблемы.

```cpp
async_send(executor, ssl_context, dns_resolver, url, request, token);
```

global state
```cpp
auto global_ssl_context     = /* impl */;
auto global_dns_resolver    = /* impl */;

void foo()
{
    async_send(executor, global_ssl_context, global_dns_resolver, url, request, token);
}
```

global state (singleton)
```cpp

auto & get_ssl_context()
{
    static auto ssl_context = /* impl */;
    return ssl_context;
}

auto & get_dns_resolver()
{
    static auto dns_resolver = /* impl */;
    return dns_resolver;
}

void foo()
{
    async_send(executor, get_ssl_context(), get_dns_resolver(), url, request, token);
}
```

```cpp
auto my_async_send(executor, url, request, token)
{
    auto & ssl_context  = /* impl */;
    auto & dns_resolver = /* impl */;
    async_send(executor, ssl_context, dns_resolver, url, request, token);
}
```




- Abstract.
- Другие реализации решения проблемы.
- - Глобальное состояние. (global dns_resolver)
- - Обёртки асинхронных операций. (wrapper around http_get)
- - Сервисы. (dns_resolver service)

Это побуждает пользователей использовать неочевидный и вредный костыли. Для упрощения использования их кода. Такие как обертки или глобальное состояние даже на той же конференции си плюс плюс акул одна из спикер. Меняет подход. Ну вот этот вот один из этих гороховых? Потому что что вообще могут сделать люди? Какие у них есть варианты у них есть вариант сделать глобальное состояние допустим, у вас есть эссен контекст, а Ну да, надо было с этого начать.

Допустим, расс такую сущность, как ссср, контекст. Который может присутствовать в таких библиотеках, как опыны шоссе и производных от них. У большинства программ достаточно одного контекста. Но есть также случаи, когда требуется 2 и более. Бустазева это библиотека широко пропагандирующая вариативность и кастомизабельность. Тем самым она позволяет практически везде указать и сосель контекст, где он. Требуется. Но одновременно тем самым в попытке сделать библиотеку более кастомизабельной. Мы одновременно делаем ее более сложной для более частого использования. В итоге получается, что 95% программ, для которых СССР контекст должен быть один. Один страдают. Ради другого ради 5 знак процента других программ, в которых нужно более 2 и контекстов. То же самое можно сказать и о классике. Динс. Ризон. Блин. А классика распознавания доменных имен. И что нам со всем этим делать? Кажется, должна быть система, которая бы удовлетворяла и тот случай, и другой. Сначала расс варианты, которые выкручивают, которыми выкручиваются пользователи. И 1 самый банальный вариант это объявить нужный ресурс глобально. Допустим, саа контекстом ссср это. Можно? А вот с диной с. Резулмером нельзя.

> [!NOTE]
> Useful information that users should know, even when skimming content.
